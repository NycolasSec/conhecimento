`Web Reconnaissance`é a base de uma avaliação de segurança completa. Este processo envolve coletar informações sistemática e meticulosamente sobre um site ou aplicativo da web alvo.

Pense nisso como a fase preparatória antes de mergulhar em análises mais profundas e exploração potencial. Ele forma uma parte crítica da fase "`Information Gathering`" do Processo de Teste de Penetração.

![[Pasted image 20240816080740.png]]

Os principais objetivos do reconhecimento da web incluem:

- `Identifying Assets`: Descobrir todos os componentes publicamente acessíveis do alvo, como páginas da web, subdomínios, endereços IP e tecnologias usadas. Esta etapa fornece uma visão geral abrangente da presença online do alvo.
- `Discovering Hidden Information`: Localizar informações sensíveis que podem ser expostas inadvertidamente, incluindo arquivos de backup, arquivos de configuração ou documentação interna. Essas descobertas podem revelar insights valiosos e potenciais pontos de entrada para ataques.
- `Analysing the Attack Surface`: Examinar a superfície de ataque do alvo para identificar potenciais vulnerabilidades e fraquezas. Isso envolve avaliar as tecnologias usadas, configurações e possíveis pontos de entrada para exploração.
- `Gathering Intelligence`: Coleta de informações que podem ser alavancadas para exploração posterior ou ataques de engenharia social. Isso inclui identificar pessoal-chave, endereços de e-mail ou padrões de comportamento que podem ser explorados.

Os invasores aproveitam essas informações para personalizar seus ataques, permitindo que eles visem fraquezas específicas e ignorem medidas de segurança. Por outro lado, os defensores usam o recon para identificar e corrigir vulnerabilidades proativamente antes que atores maliciosos possam aproveitá-las.

## Tipos de Reconhecimento

O reconhecimento da Web abrange duas metodologias fundamentais: reconhecimento `active` e `passive`. Cada abordagem oferece vantagens e desafios distintos, e entender suas diferenças é crucial para a coleta adequada de informações.

### Reconhecimento Ativo

No reconhecimento ativo, o atacante `interage diretamente com o sistema alvo` para a coleta de informações. Essa interação pode assumir várias formas:

| Técnica                  | Descrição                                                                                                           | Exemplo                                                                                                                                                       | Ferramentas                                                  | Risco de detecção                                                                                                                     |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| `Port Scanning`          | Identificar portas abertas e serviços em execução no destino.                                                       | Usando o Nmap para escanear um servidor web em busca de portas abertas como 80 (HTTP) e 443 (HTTPS).                                                          | Nmap, Masscan, Unicornscan                                   | Alto: a interação direta com o alvo pode acionar sistemas de detecção de intrusão (IDS) e firewalls.                                  |
| `Vulnerability Scanning` | Investigar o alvo em busca de vulnerabilidades conhecidas, como software desatualizado ou configurações incorretas. | Executando o Nessus em um aplicativo web para verificar falhas de injeção de SQL ou vulnerabilidades de script entre sites (XSS).                             | Nessus, OpenVAS, Nikto                                       | Alto: Os scanners de vulnerabilidade enviam cargas de exploração que as soluções de segurança podem detectar.                         |
| `Network Mapping`        | Mapeando a topologia de rede do alvo, incluindo dispositivos conectados e seus relacionamentos.                     | Usando traceroute para determinar o caminho que os pacotes percorrem para chegar ao servidor de destino, revelando possíveis saltos de rede e infraestrutura. | Traceroute, Nmap                                             | Médio a alto: tráfego de rede excessivo ou incomum pode levantar suspeitas.                                                           |
| `Banner Grabbing`        | Recuperando informações de banners exibidos por serviços em execução no destino.                                    | Conectando-se a um servidor web na porta 80 e examinando o banner HTTP para identificar o software e a versão do servidor web.                                | Netcat, enrolar                                              | Baixo: A captura de banners normalmente envolve interação mínima, mas ainda pode ser registrada.                                      |
| `OS Fingerprinting`      | Identificar o sistema operacional em execução no alvo.                                                              | Usando os recursos de detecção de sistema operacional do Nmap ( `-O`) para determinar se o alvo está executando Windows, Linux ou outro sistema operacional.  | Nmap, Xprobe2                                                | Baixo: a impressão digital do sistema operacional geralmente é passiva, mas algumas técnicas avançadas podem ser detectadas.          |
| `Service Enumeration`    | Determinar as versões específicas de serviços em execução em portas abertas.                                        | Usando a detecção de versão de serviço do Nmap ( `-sV`) para determinar se um servidor web está executando o Apache 2.4.50 ou o Nginx 1.18.0.                 | Nmap                                                         | Baixo: Semelhante à captura de banner, a enumeração de serviços pode ser registrada, mas tem menos probabilidade de disparar alertas. |
| `Web Spidering`          | Rastrear o site de destino para identificar páginas da web, diretórios e arquivos.                                  | Executar um rastreador da web como o Burp Suite Spider ou o OWASP ZAP Spider para mapear a estrutura de um site e descobrir recursos ocultos.                 | Burp Suite Spider, OWASP ZAP Spider, Scrapy (personalizável) | Baixo a médio: pode ser detectado se o comportamento do rastreador não for cuidadosamente configurado para imitar o tráfego legítimo. |

### Reconhecimento Passivo

Em contraste, o reconhecimento passivo envolve a coleta de informações sobre o alvo `sem interação direta`com ele. Isso depende da análise de informações e recursos disponíveis publicamente, como:

|Técnica|Descrição|Exemplo|Ferramentas|Risco de detecção|
|---|---|---|---|---|
|`Search Engine Queries`|Utilizar mecanismos de busca para descobrir informações sobre o alvo, incluindo sites, perfis de mídia social e artigos de notícias.|Pesquise no Google por " `[Target Name] employees`" para encontrar informações sobre funcionários ou perfis de mídia social.|Google, DuckDuckGo, Bing e mecanismos de busca especializados (por exemplo, Shodan)|Muito baixo: consultas em mecanismos de busca são atividades normais na internet e dificilmente acionam alertas.|
|`WHOIS Lookups`|Consultando bancos de dados WHOIS para recuperar detalhes de registro de domínio.|Executar uma pesquisa WHOIS em um domínio de destino para encontrar o nome do registrante, informações de contato e servidores de nomes.|ferramenta de linha de comando whois, serviços de pesquisa WHOIS online|Muito baixo: as consultas WHOIS são legítimas e não levantam suspeitas.|
|`DNS`|Analisar registros DNS para identificar subdomínios, servidores de e-mail e outras infraestruturas.|Usado `dig`para enumerar subdomínios de um domínio de destino.|cavar, nslookup, host, dnsenum, feroz, dnsrecon|Muito baixo: as consultas DNS são essenciais para a navegação na Internet e normalmente não são sinalizadas como suspeitas.|
|`Web Archive Analysis`|Examinar instantâneos históricos do site alvo para identificar alterações, vulnerabilidades ou informações ocultas.|Usando a Wayback Machine para visualizar versões anteriores de um site de destino e ver como ele mudou ao longo do tempo.|Máquina Wayback|Muito baixo: Acessar versões arquivadas de sites é uma atividade normal.|
|`Social Media Analysis`|Coleta de informações de plataformas de mídia social como LinkedIn, Twitter ou Facebook.|Pesquisar no LinkedIn por funcionários de uma organização-alvo para saber mais sobre suas funções, responsabilidades e possíveis alvos de engenharia social.|LinkedIn, Twitter, Facebook, ferramentas OSINT especializadas|Muito baixo: acessar perfis públicos de mídia social não é considerado intrusivo.|
|`Code Repositories`|Analisar repositórios de código acessíveis publicamente, como o GitHub, em busca de credenciais expostas ou vulnerabilidades.|Pesquisar no GitHub por trechos de código ou repositórios relacionados ao alvo que podem conter informações confidenciais ou vulnerabilidades de código.|GitHub, Laboratório de Git|Muito baixo: os repositórios de código são destinados ao acesso público e pesquisá-los não é suspeito.|

O reconhecimento passivo é geralmente considerado mais furtivo e menos propenso a disparar alarmes do que o reconhecimento ativo. No entanto, ele pode render informações menos abrangentes, pois depende do que já é publicamente acessível.

Neste módulo, vamos nos aprofundar nas ferramentas e técnicas essenciais usadas no reconhecimento da web, começando com o WHOIS. Entender o protocolo WHOIS fornece um gateway para acessar informações vitais sobre registros de domínio, detalhes de propriedade e a infraestrutura digital de alvos. Esse conhecimento fundamental prepara o cenário para métodos de reconhecimento mais avançados que exploraremos mais tarde.