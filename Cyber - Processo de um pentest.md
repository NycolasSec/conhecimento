# Cyber - Processo de um pentest

## Estágios de teste de penetração

A maneira mais eficaz de representá-los e defini-los é através da interdependência `stages`. Muitas vezes descobrimos em nossas pesquisas que esses processos são apresentados na forma de um processo circular. Se olharmos para isto mais de perto e imaginarmos que mesmo uma única componente do processo circular não se aplica, todo o processo é interrompido. Estritamente definido, todo o processo falha. Se assumirmos que iniciamos este processo desde o início, mas já com as informações recém-adquiridas, já se trata de uma nova abordagem de processo que não desfaz a anterior.

Não existe um guia passo a passo que possamos seguir, mas `stages`que permita que as etapas e abordagens individuais sejam variadas de forma flexível e adaptadas aos resultados e às informações que recebemos. Podemos desenvolver nosso próprio manual para várias coisas que tentamos em diferentes estágios de um teste de penetração, mas cada ambiente é diferente e, portanto, precisamos nos adaptar constantemente.

![[0-PT-Process.webp]]

Assim, o processo de teste de penetração com suas etapas é o seguinte:

#### Pré-engajamento

`Pre-engagement` é educar o cliente e ajustar o contrato. Todos os testes necessários e seus componentes são estritamente definidos e registrados contratualmente. Em uma reunião presencial ou teleconferência, muitos arranjos são feitos, como:

- `Non-Disclosure Agreement`
- `Goals`
- `Scope`
- `Time Estimation`
- `Rules of Engagement`

## Coleta de informações

`Iformation gathering` descreve como obtemos informações sobre os coponentes necessários de várias maneiras. Procuramos informações sobre a empresa-alvo e o software e hardware em uso para encontrar possíveis falhas de segurança que possamos aproveitar para obter uma posição segura.

## Avaliação de vulnerabilidade

Assim que chegamos ao estágio `Vulnerability Assessment`, analisamos os resultados do nosso estágio `Information Gathering`, procurando vulnerabilidades conhecidas nos sistemas, aplicativos e várias versões de cada um para descobrir possíveis vetores de ataque. A avaliação de vulnerabilidades é a avaliação de vulnerabilidades potenciais, tanto manualmente quanto por meios automatizados. Isto é usado para determinar o nível de ameaça e a suscetibilidade da infraestrutura de rede de uma empresa a ataques cibernéticos.

## Exploration

Na etapa `exploration`, usamos os resultados para testar nossos ataques contra os vetores potenciais e executá-los nos sistemas alvo para obter acesso inicial a esses sistemas.

## Pós exploração

Nesta fase do teste de penetração, já temos acesso à máquina explorada e garantimos que ainda temos acesso a ela mesmo que sejam feitas modificações e alterações. Durante esta fase, podemos tentar aumentar os nossos privilégios para obter os direitos mais elevados possíveis e procurar dados sensíveis, como credenciais ou outros dados que o cliente esteja preocupado em proteger (pilhagem). Às vezes realizamos pós-exploração para demonstrar a um cliente o impacto do nosso acesso. Outras vezes realizamos a pós-exploração como uma entrada para o processo de movimento lateral descrito a seguir.

## Movimento lateral

O movimento lateral descreve o movimento dentro da rede interna de nossa empresa-alvo para acessar hosts adicionais no mesmo nível de privilégio ou em um nível de privilégio superior.

## Prova de conceito

Nesta etapa, documentamos, passo a passo, os passos que tomamos para atingir o comprometimento da rede ou algum nível de acesso. Nosso objetivo é traçar um quadro de como conseguimos encadear vários pontos fracos para atingir nosso objetivo, para que eles possam ver uma imagem clara de como cada vulnerabilidade se encaixa e ajudar a priorizar seus esforços de correção.

## Pós-engajamento

Durante o pós-engajamento, documentação detalhada é preparada para que os administradores e a gestão da empresa cliente entendam a gravidade das vulnerabilidades encontradas. Nesta fase, também limpamos todos os vestígios das nossas ações em todos os hosts e servidores. Durante esta fase, criamos os resultados para o nosso cliente, realizamos uma reunião de relatório e, às vezes, entregamos uma apresentação executiva aos executivos da empresa-alvo ou ao seu conselho de administração. Por último, arquivaremos os nossos dados de testes de acordo com as nossas obrigações contratuais e política da empresa. Normalmente reteremos esses dados por um período determinado ou até realizarmos uma avaliação pós-remediação (reteste) para testar as correções do cliente.

## Importância

Devemos internalizar este procedimento e utilizá-lo como base para todos os nossos compromissos técnicos. Os componentes de cada etapa nos permitem entender com precisão quais áreas precisamos melhorar e onde está a maior parte das nossas dificuldades e lacunas de conhecimento. Por exemplo, podemos pensar num website como um alvo que precisamos estudar.

|**Estágio**|**Descrição**|
|---|---|
|`1. Pre-Engagement`|O primeiro passo é criar todos os documentos necessários na fase de pré-engajamento, discutir os objetivos da avaliação e esclarecer quaisquer dúvidas.|
|`2. Information Gathering`|Assim que as atividades de pré-engajamento forem concluídas, investigamos o site existente da empresa que fomos designados para avaliar. Identificamos as tecnologias em uso e aprendemos como funciona a aplicação web.|
|`3. Vulnerability Assessment`|Com essas informações, podemos procurar vulnerabilidades conhecidas e investigar recursos questionáveis ​​que podem permitir ações não intencionais.|
|`4. Exploitation`|Depois de encontrarmos vulnerabilidades potenciais, preparamos nosso código de exploração, ferramentas e ambiente e testamos o servidor web em busca dessas vulnerabilidades potenciais.|
|`5. Post-Exploitation`|Depois de explorarmos o alvo com sucesso, partimos para a coleta de informações e examinamos o servidor web por dentro. Se encontrarmos informações confidenciais durante esta fase, tentaremos aumentar nossos privilégios (dependendo do sistema e das configurações).|
|`6. Lateral Movement`|Se outros servidores e hosts na rede interna estiverem no escopo, tentamos nos mover pela rede e acessar outros hosts e servidores usando as informações que coletamos.|
|`7. Proof-of-Concept`|Criamos uma prova de conceito que prova que essas vulnerabilidades existem e potencialmente até automatizamos as etapas individuais que acionam essas vulnerabilidades.|
|`8. Post-Engagement`|Finalmente, a documentação é preenchida e apresentada ao nosso cliente como um relatório formal. Posteriormente, poderemos realizar uma reunião de análise do relatório para esclarecer qualquer coisa sobre nossos testes ou resultados e fornecer qualquer suporte necessário ao pessoal encarregado de remediar nossas descobertas.|

















